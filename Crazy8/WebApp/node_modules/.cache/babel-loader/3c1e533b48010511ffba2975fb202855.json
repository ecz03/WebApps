{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/environment/Crazy88/crazy88/src/components/Game.js\";\nimport React, { Component } from 'react'; //import sad from '../images/chilaquilSad.png'\n\nimport { cartasJugador, cartaActual, turno, estado, id_jugador, tamanioBaraja, cartasXJugador, paloOcho } from '../cartas.json';\n\nconst axios = require('axios').default;\n\nvar chunk = require('lodash.chunk');\n\nconst baseUrl = \"http://18.234.40.226:8000\";\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n    const id = props.playerId;\n    this.state = {\n      cartasJugador,\n      cartaActual,\n      turno,\n      estado,\n      cartasXJugador,\n      id_jugador,\n      tamanioBaraja,\n      paloOcho,\n      paloActual: \"\",\n      carouselActive: \"active\",\n      names: {\n        id: \"\"\n      },\n      hand: {\n        \"cartasJugador\": [],\n        \"turno\": 0,\n        \"cartaActual\": {\n          \"_id\": \"\",\n          \"id_carta\": 0,\n          \"palo\": \"\",\n          \"valor\": 0,\n          \"puntaje\": 0\n        },\n        \"paloOcho\": \"\",\n        \"estado\": \"inicio\",\n        \"id_jugador\": \"0\",\n        \"tamanioBaraja\": 0,\n        \"cartasXJugador\": []\n      }\n    };\n    this.fetchNames = this.fetchNames.bind(this);\n    this.fetchHand = this.fetchHand.bind(this);\n    this.tirarCarta = this.tirarCarta.bind(this);\n    this.tirarCartaDELETE = this.tirarCartaDELETE.bind(this);\n    this.tomarCartaPUT = this.tomarCartaPUT.bind(this);\n    this.cambiarPaloDELETE = this.cambiarPaloDELETE.bind(this);\n    this.cambiarPalo = this.cambiarPalo.bind(this);\n    this.enviarPalo = this.enviarPalo.bind(this);\n  }\n\n  async fetchNames() {\n    console.log(\"Fetching names\");\n    console.log({\n      'Content-Type': 'application/json',\n      \"idJuego\": this.props.gameId\n    });\n    const response = await axios.get(baseUrl + \"/players\", {\n      headers: {\n        'Content-Type': 'application/json',\n        \"idJuego\": this.props.gameId\n      }\n    });\n\n    if (response.data) {\n      this.setState({\n        names: response.data\n      }, () => {\n        console.log(\"New players names\");\n        console.log(this.state.names);\n      });\n    } else {\n      console.log(\"Out of if\");\n      console.log(response.data);\n    }\n  }\n\n  async fetchHand() {\n    var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n    console.log(url);\n    const response = await axios.get(url);\n\n    if (response.data) {\n      this.setState({\n        hand: response.data\n      }, () => {\n        console.log(\"New HAND data\");\n        console.log(this.state.hand);\n\n        if (this.state.hand == \"Ganador\") {\n          window.alert(\"Ganaste !\");\n        } else if (this.state.hand.estado == \"finalizado1\") {\n          window.alert(\"Juego finalizado, bai\");\n          window.location.href = \"/\";\n        }\n      });\n    }\n  }\n\n  async tomarCartaPUT() {\n    var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n    console.log(\"Tomando carta PUT: \");\n    console.log(url);\n    const response = await axios.put(url);\n\n    if (response.data) {\n      console.log(\"Respuesta ok\");\n      console.log(response.data);\n    } else {\n      console.log(\"Respuesta invalida\");\n      console.log(response.data);\n    }\n  }\n\n  async saltarTurnoPOST() {\n    var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n    console.log(\"Pasando turno POST: \");\n    console.log(url);\n    const response = await axios.post(url);\n\n    if (response.data) {\n      console.log(\"Respuesta ok\");\n      console.log(response.data);\n    } else {\n      console.log(\"Respuesta invalida\");\n      console.log(response.data);\n    }\n  }\n\n  async tirarCartaDELETE(idCarta) {\n    var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n    console.log(\"Tirando carta DELETE: \");\n    console.log(url);\n    var body = {\n      \"accion\": \"tirar\",\n      \"id_carta\": idCarta\n    };\n    console.log(body);\n    const response = await axios.delete(url, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      data: body\n    });\n\n    if (response.data) {\n      console.log(\"Response ok\");\n      console.log(response.data);\n    } else {\n      console.log(\"La respuesta fue invalida\");\n      console.log(response.data);\n    }\n  }\n\n  async cambiarPaloDELETE(nuevoPalo) {\n    var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n    console.log(\"Cambiando palo DELETE: \");\n    console.log(url);\n    var body = {\n      \"accion\": \"definirPalo\",\n      \"paloNuevo\": nuevoPalo\n    };\n    console.log(body);\n    const response = await axios.delete(url, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      data: body\n    });\n\n    if (response.data) {\n      console.log(\"Response ok\");\n      console.log(response.data);\n    } else {\n      console.log(\"La respuesta fue invalida\");\n      console.log(response.data);\n    }\n  }\n\n  componentDidMount() {\n    this.fetchNames();\n    this.fetchHand();\n    this.timer = setInterval(() => this.fetchHand(), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n  /*\n  render(){\n      return(\n      \n      <div className=\"mt-5 text-light display-2 text-center\">\n          Game\n          <img src={sad} alt=\"Chilaquil\"/>\n      </div>\n      \n      );\n  }*/\n\n\n  cambiarPalo(evt) {\n    this.setState({\n      paloActual: evt.target.value\n    });\n  }\n\n  enviarPalo() {\n    this.cambiarPaloDELETE(this.state.paloActual);\n  }\n\n  tirarCarta(carta) {\n    if (window.confirm('¿Quieres tirar esta carta?')) {\n      console.log(\"Tirando Carta\");\n      console.log(carta);\n      this.tirarCartaDELETE(carta.id_carta);\n    }\n  }\n\n  tomarCarta() {\n    if (window.confirm('Quieres tomar una carta?')) {\n      this.tomarCartaPUT();\n    }\n  }\n\n  saltarTurno() {\n    if (window.confirm('Quieres saltar turno?')) {\n      this.saltarTurnoPOST();\n    }\n  }\n\n  render() {\n    var dividedCards = chunk(this.state.hand.cartasJugador, 5);\n    var jugadores = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    });\n    this.state.hand.cartasXJugador.forEach(entry => {\n      jugadores = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        class: \"list-group-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, this.state.names[parseInt(entry.nombre.charAt(8))], \" : \", entry.numeroCartas), jugadores);\n    });\n    /*\n    const jugadores = this.state.cartasXJugador.map((jugador,i)=>{\n      return(\n        <li class=\"list-group-item\">{jugador.nombre}: {jugador.numeroCartas}</li>\n         );\n    });*/\n\n    const botonTomar = this.state.hand.cartasXJugador.map((jugador, i) => {\n      if (i === 0) {\n        if (this.state.hand.turno === this.props.playerId && this.state.hand.tamanioBaraja != 0) {\n          return React.createElement(\"button\", {\n            onClick: this.tomarCarta.bind(this),\n            className: \"btn btn-danger\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 253\n            },\n            __self: this\n          }, \"Tomar 1 carta\");\n        } else {\n          return React.createElement(\"button\", {\n            className: \"btn btn-danger\",\n            disabled: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257\n            },\n            __self: this\n          }, \"Tomar 1 carta\");\n        }\n      }\n    });\n    const botonSaltar = this.state.hand.cartasXJugador.map((jugador, i) => {\n      if (i === 0) {\n        if (this.state.hand.turno === this.props.playerId && this.state.hand.tamanioBaraja === 0) {\n          return React.createElement(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: this.saltarTurno.bind(this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 267\n            },\n            __self: this\n          }, \"Saltar turno\");\n        } else {\n          return React.createElement(\"button\", {\n            className: \"btn btn-danger\",\n            disabled: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 271\n            },\n            __self: this\n          }, \"Saltar turno\");\n        }\n      }\n    });\n    var botonSelectPalo = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    });\n    var selectPalo = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    });\n\n    if (this.state.hand.turno === this.props.playerId && this.state.hand.estado === \"ochoActual\") {\n      selectPalo = React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        class: \"form-control\",\n        id: \"exampleFormControlSelect1\",\n        value: this.paloActual,\n        onChange: evt => this.cambiarPalo(evt),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, \"picas\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, \"corazones\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, \"treboles\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"diamantes\"))));\n      botonSelectPalo = React.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: this.enviarPalo.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, \"Enviar Palo\");\n    } else {\n      selectPalo = React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        disabled: true,\n        class: \"form-control\",\n        id: \"exampleFormControlSelect1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, \"Selecciona palo\"))));\n      botonSelectPalo = React.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, \"Enviar Palo\");\n    }\n\n    const paloActual = this.state.hand.cartasXJugador.map((jugador, i) => {\n      if (i === 0) {\n        if (this.state.hand.paloOcho === '') {\n          return this.state.hand.cartaActual.palo;\n        } else {\n          return this.state.hand.paloOcho;\n        }\n      }\n    });\n    return React.createElement(\"div\", {\n      className: \"App d-flex-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      className: \"navbar navbar-dark bg-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"navbar-brand text-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, \"Cartas totales \", React.createElement(\"span\", {\n      className: \"badge badge-pill badge-light ml-2 mr-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, this.state.hand.cartasJugador.length), \"Eres el jugador \", React.createElement(\"span\", {\n      className: \"badge badge-pill badge-light ml-2 mr-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, this.props.playerId, \" : \", this.state.names[this.props.playerId]))), React.createElement(\"div\", {\n      id: \"carouselExampleControls\",\n      className: \"carousel slide\",\n      \"data-ride\": \"carousel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"carousel-inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, dividedCards.map((cartas, i) => {\n      const fiveCards = cartas.map((carta, j) => {\n        return React.createElement(\"div\", {\n          className: \"flex-col p-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 351\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"card mt-4 ml-2 mr-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 352\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"d-block w-20\",\n          src: \"\".concat(require('./BeetleRoyale/' + carta.id_carta + '.PNG')),\n          alt: \"First slide\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 353\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"card-footer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 355\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#carouselExampleControls\",\n          role: \"button\",\n          \"data-slide-to\": \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 356\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: this.tirarCarta.bind(this, carta),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 357\n          },\n          __self: this\n        }, \"Tirar\"))));\n      });\n\n      if (i == 0) {\n        return React.createElement(\"div\", {\n          className: \"carousel-item active\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 366\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"d-flex flex-row justify-content-md-center \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 367\n          },\n          __self: this\n        }, fiveCards));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"carousel-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 377\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"d-flex flex-row justify-content-md-center \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 378\n          },\n          __self: this\n        }, fiveCards));\n      }\n    })), React.createElement(\"a\", {\n      className: \"carousel-control-prev\",\n      href: \"#carouselExampleControls\",\n      role: \"button\",\n      \"data-slide\": \"prev\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"carousel-control-prev-icon\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }, \"Previous\")), React.createElement(\"a\", {\n      className: \"carousel-control-next\",\n      href: \"#carouselExampleControls\",\n      role: \"button\",\n      \"data-slide\": \"next\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"carousel-control-next-icon\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"sr-only\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, \"Next\"))), React.createElement(\"div\", {\n      className: \"d-flex flex-row justify-content-md-center \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flex-col p-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, botonTomar), React.createElement(\"div\", {\n      className: \"flex-col p-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }, botonSaltar), React.createElement(\"div\", {\n      className: \"flex-col p-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411\n      },\n      __self: this\n    }, selectPalo), React.createElement(\"div\", {\n      className: \"flex-col p-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416\n      },\n      __self: this\n    }, botonSelectPalo)), React.createElement(\"div\", {\n      className: \"d-flex flex-fill\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flex-fill d-flex flex-row justify-content-md-center \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col col-md-2 p-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card mt-4 ml-2 mr-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"card-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }, \"Estadisticas actuales\")), React.createElement(\"ul\", {\n      class: \"list-group list-group-flush\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      class: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431\n      },\n      __self: this\n    }, \"Turno de jugador \", this.state.hand.turno, \" : \", this.state.names[this.state.hand.turno]), React.createElement(\"li\", {\n      class: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432\n      },\n      __self: this\n    }, \"Estado del juego: \", this.state.hand.estado), React.createElement(\"li\", {\n      class: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }, \"Palo actual: \", paloActual)))), React.createElement(\"div\", {\n      className: \"flex-fill col col-md-2 p-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card mt-4 ml-2 mr-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"card-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443\n      },\n      __self: this\n    }, \"Carta en pila de descarte\"), React.createElement(\"img\", {\n      className: \"d-block w-20\",\n      src: \"\".concat(require('./BeetleRoyale/' + this.state.hand.cartaActual.id_carta + '.PNG')),\n      alt: \"Carta Actual\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"flex-fill col col-md-2 p-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card mt-4 ml-2 mr-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"card-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454\n      },\n      __self: this\n    }, \"Cartas por jugador\")), React.createElement(\"ul\", {\n      class: \"list-group list-group-flush\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456\n      },\n      __self: this\n    }, jugadores))))));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/home/ec2-user/environment/Crazy88/crazy88/src/components/Game.js"],"names":["React","Component","cartasJugador","cartaActual","turno","estado","id_jugador","tamanioBaraja","cartasXJugador","paloOcho","axios","require","default","chunk","baseUrl","Game","constructor","props","id","playerId","state","paloActual","carouselActive","names","hand","fetchNames","bind","fetchHand","tirarCarta","tirarCartaDELETE","tomarCartaPUT","cambiarPaloDELETE","cambiarPalo","enviarPalo","console","log","gameId","response","get","headers","data","setState","url","window","alert","location","href","put","saltarTurnoPOST","post","idCarta","body","delete","nuevoPalo","componentDidMount","timer","setInterval","componentWillUnmount","clearInterval","evt","target","value","carta","confirm","id_carta","tomarCarta","saltarTurno","render","dividedCards","jugadores","forEach","entry","parseInt","nombre","charAt","numeroCartas","botonTomar","map","jugador","i","botonSaltar","botonSelectPalo","selectPalo","palo","length","cartas","fiveCards","j"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n//import sad from '../images/chilaquilSad.png'\nimport {cartasJugador,cartaActual,turno,estado,id_jugador,tamanioBaraja,cartasXJugador,paloOcho} from '../cartas.json';\nconst axios = require('axios').default;\nvar chunk = require('lodash.chunk');\nconst baseUrl= \"http://18.234.40.226:8000\";\n\nclass Game extends Component{\n    constructor(props) {\n    super(props);\n    const id = props.playerId;\n    this.state = {\n      cartasJugador,\n      cartaActual,\n      turno,\n      estado,\n      cartasXJugador,\n      id_jugador,\n      tamanioBaraja,\n      paloOcho,\n      paloActual: \"\",\n      carouselActive: \"active\",\n      names:{ id : \"\"},\n      hand: {\n    \"cartasJugador\": [],\n    \"turno\": 0,\n    \"cartaActual\": {\n        \"_id\": \"\",\n        \"id_carta\": 0,\n        \"palo\": \"\",\n        \"valor\": 0,\n        \"puntaje\": 0\n    },\n    \"paloOcho\": \"\",\n    \"estado\": \"inicio\",\n    \"id_jugador\": \"0\",\n    \"tamanioBaraja\": 0,\n    \"cartasXJugador\": [ ]\n},\n    }\n    this.fetchNames=this.fetchNames.bind(this);\n    this.fetchHand=this.fetchHand.bind(this);\n    this.tirarCarta=this.tirarCarta.bind(this);\n    this.tirarCartaDELETE=this.tirarCartaDELETE.bind(this);\n    this.tomarCartaPUT=this.tomarCartaPUT.bind(this);\n    this.cambiarPaloDELETE=this.cambiarPaloDELETE.bind(this);\n    this.cambiarPalo=this.cambiarPalo.bind(this);\n    this.enviarPalo=this.enviarPalo.bind(this);\n  }\n  \n  async fetchNames(){\n    console.log(\"Fetching names\")\n     console.log({'Content-Type': 'application/json', \"idJuego\": this.props.gameId})\n     const response = await axios.get(baseUrl+\"/players\",\n      {headers: {'Content-Type': 'application/json', \"idJuego\": this.props.gameId}}\n     );\n     \n     if(response.data){\n       this.setState({\n         names:response.data\n       }, ()=>{\n         console.log(\"New players names\");\n         console.log(this.state.names);\n       });\n     } else {\n       console.log(\"Out of if\");\n       console.log(response.data);\n     }\n   }\n  \n  \n    async fetchHand(){\n      var url = baseUrl+\"/\"+this.props.gameId+\"/\"+this.props.playerId;\n      console.log(url);\n      const response = await axios.get(url);\n      \n      if(response.data){\n        this.setState({\n          hand: response.data\n        }, ()=>{\n          console.log(\"New HAND data\");\n          console.log(this.state.hand);        \n          if(this.state.hand == \"Ganador\"){\n            window.alert(\"Ganaste !\");\n          } else if(this.state.hand.estado == \"finalizado1\"){\n            window.alert(\"Juego finalizado, bai\");\n            window.location.href = \"/\";\n          }\n        });\n      }\n    }\n    \n    async tomarCartaPUT(){\n      var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n      console.log(\"Tomando carta PUT: \");\n      console.log(url);\n      \n      const response = await axios.put(url);\n      \n      if(response.data){\n        console.log(\"Respuesta ok\");\n        console.log(response.data)\n      } else {\n        console.log(\"Respuesta invalida\");\n        console.log(response.data)\n      }\n    }\n    \n    async saltarTurnoPOST(){\n      var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n      console.log(\"Pasando turno POST: \");\n      console.log(url);\n      \n      const response = await axios.post(url);\n      \n      if(response.data){\n        console.log(\"Respuesta ok\");\n        console.log(response.data)\n      } else {\n        console.log(\"Respuesta invalida\");\n        console.log(response.data)\n      }\n      \n    }\n    \n    async tirarCartaDELETE(idCarta){\n      var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n      console.log(\"Tirando carta DELETE: \");\n      console.log(url);\n      \n      var body = {\n          \t\"accion\": \"tirar\",\n          \t\"id_carta\": idCarta}\n      console.log(body)    \t\n      const response = await axios.delete(\n        url,\n        {headers: {'Content-Type': 'application/json'},\n        data: body\n        }\n       \n        );\n        \n      if(response.data){\n        console.log(\"Response ok\")\n        console.log(response.data);\n      } else {\n        console.log(\"La respuesta fue invalida\");\n        console.log(response.data)\n      }\n    }\n    \n    async cambiarPaloDELETE(nuevoPalo){\n      var url = baseUrl + \"/\" + this.props.gameId + \"/\" + this.props.playerId;\n      console.log(\"Cambiando palo DELETE: \");\n      console.log(url);\n      \n      var body = {\n          \t\"accion\": \"definirPalo\",\n          \t\"paloNuevo\": nuevoPalo}\n      console.log(body)    \t\n      const response = await axios.delete(\n        url,\n        {headers: {'Content-Type': 'application/json'},\n        data: body\n        }\n       \n        );\n        \n      if(response.data){\n        console.log(\"Response ok\")\n        console.log(response.data);\n      } else {\n        console.log(\"La respuesta fue invalida\");\n        console.log(response.data)\n      }\n    }\n    \n    componentDidMount() {\n        this.fetchNames();\n        this.fetchHand();\n        this.timer = setInterval(() => this.fetchHand(), 1000);\n    }\n    \n    componentWillUnmount() {\n        clearInterval(this.timer);\n        this.timer = null;\n    }\n    \n    \n    /*\n    render(){\n        return(\n        \n        <div className=\"mt-5 text-light display-2 text-center\">\n            Game\n            <img src={sad} alt=\"Chilaquil\"/>\n        </div>\n        \n        );\n    }*/\n    \n  cambiarPalo(evt){ \n    this.setState({\n      paloActual: evt.target.value\n    });\n  }\n  \n  enviarPalo(){\n    this.cambiarPaloDELETE(this.state.paloActual);\n    \n  }\n  \n  tirarCarta(carta) {\n    if (window.confirm('¿Quieres tirar esta carta?')){\n      console.log(\"Tirando Carta\");\n      console.log(carta);\n      this.tirarCartaDELETE(carta.id_carta);\n      \n    }\n  }\n  \n  tomarCarta(){\n    if (window.confirm('Quieres tomar una carta?')){\n      this.tomarCartaPUT();\n    }\n  }\n  \n  saltarTurno(){\n    if (window.confirm('Quieres saltar turno?')){\n      this.saltarTurnoPOST();\n    }\n  }\n  \n  render (){\n    var dividedCards = chunk(this.state.hand.cartasJugador, 5);\n    \n    var jugadores = <div></div>;\n    this.state.hand.cartasXJugador.forEach((entry)=>{\n      jugadores = <div><li class=\"list-group-item\">{this.state.names[parseInt(entry.nombre.charAt(8))]} : {entry.numeroCartas}</li>{jugadores}</div>\n    });\n    \n    /*\n    const jugadores = this.state.cartasXJugador.map((jugador,i)=>{\n      return(\n        <li class=\"list-group-item\">{jugador.nombre}: {jugador.numeroCartas}</li>\n         );\n    });*/\n\n    \n    const botonTomar = this.state.hand.cartasXJugador.map((jugador,i)=>{\n      if(i===0){\n        if(this.state.hand.turno === this.props.playerId && this.state.hand.tamanioBaraja != 0){\n          return(<button onClick={this.tomarCarta.bind(this)}className=\"btn btn-danger\">\n                Tomar 1 carta\n              </button>)\n        }else{\n          return(<button className=\"btn btn-danger\" disabled>\n                Tomar 1 carta\n              </button>)\n        }\n      }\n    })\n    \n    const botonSaltar = this.state.hand.cartasXJugador.map((jugador,i)=>{\n      if(i===0){\n        if(this.state.hand.turno === this.props.playerId && this.state.hand.tamanioBaraja === 0){\n          return(<button className=\"btn btn-danger\" onClick={this.saltarTurno.bind(this)}>\n                Saltar turno\n              </button>)\n        }else{\n          return(<button className=\"btn btn-danger\" disabled>\n                Saltar turno\n              </button>)\n        }\n      }\n    })\n    \n    var botonSelectPalo = <div></div>;\n    \n    \n    var selectPalo = <div></div>;\n    if(this.state.hand.turno === this.props.playerId && this.state.hand.estado === \"ochoActual\"){\n      selectPalo = <form>\n              <div class=\"form-group\">\n                <select class=\"form-control\" id=\"exampleFormControlSelect1\" value={this.paloActual}onChange={evt => this.cambiarPalo(evt)}>\n                  <option>picas</option>\n                  <option>corazones</option>\n                  <option>treboles</option>\n                  <option>diamantes</option>\n                </select>\n              </div>\n            </form>;\n            \n      botonSelectPalo = <button className=\"btn btn-danger\" onClick={this.enviarPalo.bind(this)}>\n                Enviar Palo\n              </button>;\n    } else {\n      selectPalo = <form>\n              <div class=\"form-group\">\n                <select disabled class=\"form-control\" id=\"exampleFormControlSelect1\">\n                  <option>Selecciona palo</option>\n                </select>\n              </div>\n            </form>\n            \n      botonSelectPalo = <button className=\"btn btn-danger\"disabled>\n                Enviar Palo\n              </button>;\n    }\n    \n    \n    const paloActual = this.state.hand.cartasXJugador.map((jugador,i)=>{\n      if(i===0){\n        if(this.state.hand.paloOcho === ''){\n          return(this.state.hand.cartaActual.palo)\n        }else{\n          return(this.state.hand.paloOcho)\n        }\n      }\n    })\n    \n    \n    \n    return(\n      <div className=\"App d-flex-row\">\n      \n        {/*barra nav cartas actuales*/}\n        <nav className=\"navbar navbar-dark bg-dark\">\n          <a className=\"navbar-brand text-light\">\n            Cartas totales <span className=\"badge badge-pill badge-light ml-2 mr-4\">\n                {this.state.hand.cartasJugador.length}\n              </span>\n              Eres el jugador <span className=\"badge badge-pill badge-light ml-2 mr-4\">\n                {this.props.playerId} : {this.state.names[this.props.playerId]}\n              </span>\n          </a>\n        </nav>\n        {/*termina barra nav cartas actuales*/}\n\n        \n        {/*inicia carrusel*/}\n        {/*inicia codigo base*/}\n        <div id=\"carouselExampleControls\" className=\"carousel slide\" data-ride=\"carousel\">\n          <div className=\"carousel-inner\">\n            {\n              \n              dividedCards.map((cartas, i)=>{\n      \n      const fiveCards = cartas.map((carta, j)=>{\n        return(\n        <div className=\"flex-col p-3\" >\n          <div className=\"card mt-4 ml-2 mr-2\">\n            <img className=\"d-block w-20\" src={`${require('./BeetleRoyale/'+carta.id_carta+'.PNG')}`} alt=\"First slide\"/>\n          </div>\n          <div className=\"card-footer\">\n          <a href=\"#carouselExampleControls\" role=\"button\" data-slide-to=\"0\">\n            <button className=\"btn btn-danger\" onClick={this.tirarCarta.bind(this,carta)}>\n            Tirar\n          </button>\n          </a>\n          </div>\n        </div>);\n      });\n      if(i== 0){\n        return(\n         <div className={\"carousel-item active\"}>\n              <div className=\"d-flex flex-row justify-content-md-center \">\n              \n              {fiveCards}\n              \n              </div>\n              \n              </div>\n        );\n      } else {\n        return(\n         <div className=\"carousel-item\">\n              <div className=\"d-flex flex-row justify-content-md-center \">\n              {fiveCards}\n              </div>\n              </div>\n        );}})}\n          </div>\n    \n          <a className=\"carousel-control-prev\" href=\"#carouselExampleControls\" role=\"button\" data-slide=\"prev\">\n            <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n            <span className=\"sr-only\">Previous</span>\n          </a>\n          <a className=\"carousel-control-next\" href=\"#carouselExampleControls\" role=\"button\" data-slide=\"next\">\n            <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n            <span className=\"sr-only\">Next</span>\n          </a>\n        </div>\n        {/*termina carrusel*/}\n        \n        \n        <div className=\"d-flex flex-row justify-content-md-center \">\n          {/*Inicia botón para tomar*/}\n          <div className=\"flex-col p-3\" >\n            {botonTomar}\n          </div>\n          {/*Termina botón para tomar*/}\n        \n          {/*Inicia botón para pasar*/}\n          <div className=\"flex-col p-3\" >\n            {botonSaltar}\n          </div>\n          {/*Termina botón para pasar*/}\n          \n          {/*Inicia select palo*/}\n          <div className=\"flex-col p-3\" >\n            {selectPalo}\n          </div>\n          {/*Termina select palo*/}\n          \n          <div className=\"flex-col p-3\" >\n            {botonSelectPalo}\n          </div>\n        </div>\n        \n        {/*Datos de juego*/}\n        <div className=\"d-flex flex-fill\">\n        {/*Inicia estadisticas generales*/}\n          <div className=\"flex-fill d-flex flex-row justify-content-md-center \">\n            <div className=\"col col-md-2 p-3\" >\n              <div className=\"card mt-4 ml-2 mr-2\">\n                <div className=\"card-body\">\n                  <h4 className=\"card-title\">Estadisticas actuales</h4>\n                </div>\n                <ul class=\"list-group list-group-flush\">\n                  <li class=\"list-group-item\">Turno de jugador {this.state.hand.turno} : {this.state.names[this.state.hand.turno]}</li>\n                  <li class=\"list-group-item\">Estado del juego: {this.state.hand.estado}</li>\n                  <li class=\"list-group-item\">Palo actual: {paloActual}</li>\n                </ul>\n              </div>\n            </div>\n        {/*termina estadisticas generales*/}\n        \n        {/*Inicia carta actual*/}\n            <div className=\"flex-fill col col-md-2 p-3\" >\n              <div className=\"card mt-4 ml-2 mr-2\">\n                <div className=\"card-body \">\n                  <h4 className=\"card-title\">Carta en pila de descarte</h4>\n                  <img className=\"d-block w-20\" src={`${require('./BeetleRoyale/'+ this.state.hand.cartaActual.id_carta+'.PNG')}`} alt=\"Carta Actual\"/>\n                </div>\n              </div>\n            </div>\n        {/*termina carta actual*/}\n        \n        {/*Inicia estadisticas jugadores*/}\n            <div className=\"flex-fill col col-md-2 p-3\" >\n              <div className=\"card mt-4 ml-2 mr-2\">\n                <div className=\"card-body\">\n                  <h4 className=\"card-title\">Cartas por jugador</h4>\n                </div>\n                <ul class=\"list-group list-group-flush\">\n                  {jugadores}\n                </ul>\n              </div>\n            </div>\n          </div>\n        {/*Termina estadisticas jugadores*/}\n        </div>\n        {/*termina datos de juego*/}\n          \n       \n        \n        \n      </div>\n    );\n  }\n    \n    \n}\n\nexport default Game"]},"metadata":{},"sourceType":"module"}